# Use an official lightweight Python image
FROM python:3.10-slim

# Set working directory
WORKDIR /app

# Copy requirements first and install dependencies
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Copy all files (the mounted volumes will overwrite the dirs during runtime)
COPY . .

# Ensure folders exist if not mounted
# RUN mkdir -p /app/best_prompt /app/best_model /app/logs /app/configs 

# Ensure environment is clean
ENV PYTHONUNBUFFERED=1

# Default command (can be overridden in compose)
CMD ["bash", "-c", "echo 'Inside container'; ls -la /app/testing_data && python main.py"]
